<UserControl x:Class="KeyboardHeatmapPro.Views.SettingsView"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             mc:Ignorable="d"
             d:DesignHeight="600" d:DesignWidth="800">
    
    <Grid>
        <ScrollViewer VerticalScrollBarVisibility="Auto">
            <StackPanel Margin="40,20" MaxWidth="600">
                <TextBlock Text="Settings" FontSize="28" FontWeight="Bold" Margin="0,0,0,20"/>
                
                <!-- General Settings -->
                <GroupBox Header="General Settings" Margin="0,0,0,20">
                    <StackPanel Margin="10">
                        <CheckBox Content="Auto-start with Windows" 
                                  IsChecked="{Binding AutoStartWithWindows}" 
                                  Margin="0,5"/>
                        <CheckBox Content="Start minimized to system tray" 
                                  IsChecked="{Binding StartMinimized}" 
                                  Margin="0,5"/>
                        <CheckBox Content="Remember window position and size" 
                                  IsChecked="{Binding RememberWindowPosition}" 
                                  Margin="0,5"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- Tracking Preferences -->
                <GroupBox Header="Tracking Preferences" Margin="0,0,0,20">
                    <Grid Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="200"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Global Hotkey:" 
                                   VerticalAlignment="Center" Margin="0,5"/>
                        <TextBox Grid.Row="0" Grid.Column="1" 
                                 Text="{Binding GlobalHotkey}" 
                                 IsReadOnly="True" 
                                 Margin="0,5"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Data Retention (days):" 
                                   VerticalAlignment="Center" Margin="0,5"/>
                        <Grid Grid.Row="1" Grid.Column="1" Margin="0,5">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="*"/>
                                <ColumnDefinition Width="50"/>
                            </Grid.ColumnDefinitions>
                            <Slider Grid.Column="0" Minimum="1" Maximum="365" 
                                    Value="{Binding DataRetentionDays}" 
                                    TickFrequency="1" IsSnapToTickEnabled="True"
                                    VerticalAlignment="Center"/>
                            <TextBlock Grid.Column="1" Text="{Binding DataRetentionDays}" 
                                       VerticalAlignment="Center" HorizontalAlignment="Center"
                                       FontWeight="Bold"/>
                        </Grid>
                        
                        <CheckBox Grid.Row="2" Grid.Column="0" Grid.ColumnSpan="2" 
                                  Content="Exclude password fields from tracking" 
                                  IsChecked="{Binding ExcludePasswordFields}" 
                                  Margin="0,5"/>
                    </Grid>
                </GroupBox>
                
                <!-- Appearance Settings -->
                <GroupBox Header="Appearance" Margin="0,0,0,20">
                    <StackPanel Margin="10">
                        <TextBlock Text="Theme" Margin="0,0,0,5"/>
                        <!-- TODO: Fix EnumBooleanConverter usage
                        <RadioButton Content="Light Theme" 
                                     IsChecked="{Binding SelectedTheme, Converter={StaticResource EnumBooleanConverter}, ConverterParameter=Light}" 
                                     Margin="0,2"/>
                        <RadioButton Content="Dark Theme" 
                                     IsChecked="{Binding SelectedTheme, Converter={StaticResource EnumBooleanConverter}, ConverterParameter=Dark}" 
                                     Margin="0,2"/>
                        <RadioButton Content="System Default" 
                                     IsChecked="{Binding SelectedTheme, Converter={StaticResource EnumBooleanConverter}, ConverterParameter=Auto}" 
                                     Margin="0,2"/>
                        -->
                        <ComboBox ItemsSource="{Binding Themes}" SelectedItem="{Binding SelectedTheme}" Width="150" HorizontalAlignment="Left"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- Data Management -->
                <GroupBox Header="Data Management" Margin="0,0,0,20">
                    <Grid Margin="10">
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="150"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <TextBlock Grid.Row="0" Grid.Column="0" Text="Database Size:" Margin="0,2"/>
                        <TextBlock Grid.Row="0" Grid.Column="1" Text="0 MB" Margin="0,2"/>
                        
                        <TextBlock Grid.Row="1" Grid.Column="0" Text="Total Sessions:" Margin="0,2"/>
                        <TextBlock Grid.Row="1" Grid.Column="1" Text="0" Margin="0,2"/>
                        
                        <TextBlock Grid.Row="2" Grid.Column="0" Text="Storage Location:" Margin="0,2"/>
                        <TextBlock Grid.Row="2" Grid.Column="1" Text="%APPDATA%\KeyboardHeatmapPro" 
                                   TextTrimming="CharacterEllipsis" Margin="0,2"/>
                        
                        <TextBlock Grid.Row="3" Grid.Column="0" Text="Last Backup:" Margin="0,2"/>
                        <TextBlock Grid.Row="3" Grid.Column="1" Text="Never" Margin="0,2"/>
                        
                        <StackPanel Grid.Row="4" Grid.Column="0" Grid.ColumnSpan="2" 
                                    Orientation="Horizontal" Margin="0,10,0,0">
                            <Button Content="Export All Data" Width="120" Margin="0,0,5,0"/>
                            <Button Content="Import Data" Width="120" Margin="0,0,5,0"/>
                            <Button Content="Clear All Data" Width="120" Margin="0,0,5,0"
                                    Background="#FFE57373"/>
                            <Button Content="Backup Now" Width="120"/>
                        </StackPanel>
                    </Grid>
                </GroupBox>
                
                <!-- Privacy & Security -->
                <GroupBox Header="Privacy &amp; Security" Margin="0,0,0,20">
                    <StackPanel Margin="10">
                        <CheckBox Content="Exclude password fields" 
                                  IsChecked="{Binding ExcludePasswordFields}" 
                                  Margin="0,5"/>
                        <CheckBox Content="Anonymize application names in exports" 
                                  Margin="0,5"/>
                        <CheckBox Content="Enable data encryption" 
                                  Margin="0,5"/>
                        <TextBlock Text="All data is stored locally on your computer" 
                                   Opacity="0.7" FontStyle="Italic" Margin="0,10,0,0"/>
                    </StackPanel>
                </GroupBox>
                
                <!-- Action Buttons -->
                <Grid Margin="0,20,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>
                    
                    <Button Grid.Column="0" Content="Reset to Defaults" 
                            Command="{Binding ResetSettingsCommand}" 
                            HorizontalAlignment="Left" Width="120"/>
                    
                    <Button Grid.Column="1" Content="Cancel" Width="100" Margin="5,0"/>
                    <Button Grid.Column="2" Content="Save Settings" 
                            Command="{Binding SaveSettingsCommand}" 
                            Width="100" Margin="5,0"
                            Style="{DynamicResource PrimaryButtonStyle}"/>
                </Grid>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</UserControl>
